<div class="project-detail-container">

    <ng-container>
      <div class="project-title-row">
        <div class="title-section">
          <button class="back-btn" (click)="goToArchiveList()">← アーカイブ一覧へ</button>
          <h2 class="project-name">{{ project?.title }}</h2>
        </div>
      </div>
      <ng-container>
        <div class="project-info-card">
          <div class="project-description-row">
            <span class="info-label">説明</span>
            <span class="info-value description-value">{{ project?.description }}</span>
          </div>
          <div class="project-meta-row">
            <div class="meta-item"><span class="meta-label">作成日</span><span class="meta-value">{{ formatDate(project?.createdAt) }}</span></div>
            <div class="meta-item"><span class="meta-label">更新日</span><span class="meta-value">{{ formatDate(project?.updatedAt) }}</span></div>
            <div class="meta-item"><span class="meta-label">締切日</span><span class="meta-value">{{ project?.dueDate ? formatDate(project?.dueDate) : '' }}</span></div>
            <div class="meta-item"><span class="meta-label">作成者</span><span class="meta-value">{{ creatorName || '不明' }}</span></div>
          </div>
          <div class="project-member-row">
            <span class="info-label">メンバー</span>
            <div class="member-list">
              <div class="member-item" *ngFor="let member of nonCreatorArchiveMembers">
                <div class="member-info">
                  <span class="member-name">{{ member.displayName }}</span>
                  <button class="remove-member-btn">✕</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <div class="issues-section" id="issues-section">
        <div class="issues-header">
          <h3>課題一覧</h3>
        </div>
        <div class="issues-list vertical-list">
          <div class="issue-card" *ngFor="let issue of archivedIssues">
            <div class="issue-card-header">
              <div class="issue-title clickable">
                {{ issue.title }}
                <span class="priority-icon" [ngClass]="getPriorityClass(issue.priority)">{{ getPriorityLabel(issue.priority) }}</span>
              </div>
            </div>
            <div class="issue-meta">
              <span>ステータス: {{ issue.status }}</span>
              <span>開始日: {{ formatDate(issue.startDate) }}</span>
              <span>期限日: {{ formatDate(issue.dueDate) }}</span>
              <span>担当者: {{ getMemberDisplayName(issue.assignee) }}</span>
            </div>
            <div class="issue-memo">
              <span>メモ: {{ issue.memo }}</span>
            </div>
            <div class="issue-todos">
              <span>【ToDo】</span>
              <ul>
                <li *ngFor="let todo of getTodosForIssue(issue.id);" [ngClass]="{ 'todo-completed': todo.completed }">
                  <div class="todo-title">{{ todo.title }}</div>
                  <div class="todo-meta">
                    <span>担当者: {{ getMemberDisplayName(todo.assignee) }}</span>
                    <span>完了日時: {{ todo.completedAt ? formatDateTime(todo.completedAt) : '-' }}</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

  </div> 